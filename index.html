<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapa - Card√°pio Digital Neon</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

// Database usando LocalStorage
class DB {
    static save(k, d) { localStorage.setItem(k, JSON.stringify(d)); }
    static load(k, def = null) { const d = localStorage.getItem(k); return d ? JSON.parse(d) : def; }
}

const menuInicial = [
    { id: 1, name: "Picanha Premium", description: "400g grelhada, arroz, farofa e vinagrete", price: 89.90, category: "Carnes", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23c92a2a' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='white' font-size='28'%3EPicanha%3C/text%3E%3C/svg%3E" },
    { id: 2, name: "Salm√£o Grelhado", description: "Fil√© de salm√£o com molho de maracuj√°", price: 76.90, category: "Peixes", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23ff6b6b' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='white' font-size='28'%3ESalm%C3%A3o%3C/text%3E%3C/svg%3E" },
    { id: 3, name: "Pizza Margherita", description: "Mussarela de b√∫fala, manjeric√£o e azeite", price: 52.90, category: "Pizzas", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23fab005' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='white' font-size='26'%3EPizza%3C/text%3E%3C/svg%3E" },
    { id: 4, name: "Burger Chapa", description: "180g blend, cheddar, bacon, cebola caramelizada", price: 38.90, category: "Hamb√∫rgueres", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23d9480f' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='white' font-size='28'%3EBurger%3C/text%3E%3C/svg%3E" },
    { id: 5, name: "Tiramisu", description: "Sobremesa italiana com caf√© e mascarpone", price: 24.90, category: "Sobremesas", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%238b4513' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='white' font-size='28'%3ETiramisu%3C/text%3E%3C/svg%3E" },
    { id: 6, name: "Cerveja Artesanal", description: "IPA local 500ml gelada", price: 15.90, category: "Bebidas", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23f59f00' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' fill='white' font-size='28'%3ECerveja%3C/text%3E%3C/svg%3E" }
];

const App = () => {
    const [menu, setMenu] = useState(() => DB.load('menu', menuInicial));
    const [pedidos, setPedidos] = useState(() => DB.load('pedidos', {}));
    const [historico, setHistorico] = useState(() => DB.load('historico', []));
    const [horaAbertura, setHoraAbertura] = useState(() => DB.load('horaAbertura', {}));
    const [mesa, setMesa] = useState(null);
    const [showMesas, setShowMesas] = useState(true);
    const [categoria, setCategoria] = useState('Todos');
    const [busca, setBusca] = useState('');
    const [toast, setToast] = useState(null);
    const [added, setAdded] = useState([]);
    const [showCaixa, setShowCaixa] = useState(false);
    const [showHist, setShowHist] = useState(false);
    const [showAdmin, setShowAdmin] = useState(false);
    const [senha, setSenha] = useState('');
    const [autenticado, setAutenticado] = useState(false);
    const [editItem, setEditItem] = useState(null);
    const [newItem, setNewItem] = useState({ name: '', description: '', price: 0, category: 'Carnes', image: '' });

    useEffect(() => { DB.save('menu', menu); }, [menu]);
    useEffect(() => { DB.save('pedidos', pedidos); }, [pedidos]);
    useEffect(() => { DB.save('historico', historico); }, [historico]);
    useEffect(() => { DB.save('horaAbertura', horaAbertura); }, [horaAbertura]);

    useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        const m = params.get('mesa');
        if (m) {
            const n = parseInt(m);
            if (n >= 1 && n <= 50) {
                if (pedidos[n]?.length > 0) {
                    mostrarToast(`‚ö†Ô∏è Mesa ${n} ocupada!`, 'warning');
                } else {
                    setMesa(n);
                    setShowMesas(false);
                }
            }
        }
    }, []);

    const cats = ['Todos', ...new Set(menu.map(i => i.category))];
    const menuFiltrado = menu.filter(i => {
        const catOk = categoria === 'Todos' || i.category === categoria;
        const buscaOk = i.name.toLowerCase().includes(busca.toLowerCase()) || i.description.toLowerCase().includes(busca.toLowerCase());
        return catOk && buscaOk;
    });

    const selecionarMesa = (n) => {
        if (pedidos[n]?.length > 0) {
            mostrarToast('‚ö†Ô∏è Mesa ocupada!', 'warning');
            return;
        }
        setMesa(n);
        setShowMesas(false);
        const url = new URL(window.location.href);
        url.searchParams.set('mesa', n);
        window.history.pushState({}, '', url.toString());
    };

    const addPedido = (item) => {
        if (!mesa) return;
        if (!horaAbertura[mesa]) {
            setHoraAbertura(p => ({ ...p, [mesa]: new Date() }));
        }
        setPedidos(p => {
            const pm = p[mesa] || [];
            const ex = pm.find(x => x.id === item.id);
            if (ex) {
                return { ...p, [mesa]: pm.map(x => x.id === item.id ? { ...x, quantidade: x.quantidade + 1 } : x) };
            }
            return { ...p, [mesa]: [...pm, { ...item, quantidade: 1 }] };
        });
        setAdded(p => [...p, item.id]);
        setTimeout(() => setAdded(p => p.filter(x => x !== item.id)), 2000);
        mostrarToast('‚úÖ Adicionado!');
    };

    const calcTotal = (n) => {
        const p = pedidos[n] || [];
        return p.reduce((s, i) => s + (i.price * i.quantidade), 0);
    };

    const fecharConta = (n) => {
        const p = pedidos[n] || [];
        const t = calcTotal(n);
        const abertura = horaAbertura[n] || new Date();
        const fechamento = new Date();
        const codigo = abertura.getDate().toString().padStart(2, '0') +
                      (abertura.getMonth() + 1).toString().padStart(2, '0') +
                      abertura.getFullYear() +
                      abertura.getHours().toString().padStart(2, '0') +
                      abertura.getMinutes().toString().padStart(2, '0');
        
        setHistorico(h => [{
            codigo,
            mesa: n,
            itens: p,
            total: t,
            abertura,
            fechamento,
            dataFmt: abertura.toLocaleDateString('pt-BR'),
            horaAberturaFmt: abertura.toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit'}),
            horaFechamentoFmt: fechamento.toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit'})
        }, ...h]);
        
        setPedidos(p => {
            const novo = { ...p };
            delete novo[n];
            return novo;
        });
        setHoraAbertura(h => {
            const novo = { ...h };
            delete novo[n];
            return novo;
        });
        mostrarToast('‚úÖ Conta fechada!');
    };

    const imprimirRecibo = (dados) => {
        const w = window.open('', '_blank', 'width=800,height=600');
        if (!w) { alert('Permita pop-ups!'); return; }
        w.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Recibo ${dados.codigo}</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;padding:20px;max-width:600px;margin:0 auto}h1{color:#00ff41;text-align:center;margin-bottom:20px}.info{margin:20px 0;padding:15px;background:#f5f5f5;border-left:4px solid #ff006e}.info div{margin:5px 0}.item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed #ccc}.total{margin-top:20px;padding:20px;background:#0a0e27;color:white;font-size:20px;font-weight:bold;display:flex;justify-content:space-between}.total-val{color:#00ff41;font-size:28px}@media print{body{padding:0}.no-print{display:none}}</style></head><body><h1>RESTAURANTE CHAPA</h1><p style="text-align:center;color:#00ff41;margin-bottom:20px">Caxambu - MG</p><div class="info"><div><strong>C√≥digo:</strong> ${dados.codigo}</div><div><strong>Mesa:</strong> ${dados.mesa}</div><div><strong>Data:</strong> ${dados.dataFmt}</div><div><strong>Hor√°rio:</strong> ${dados.horaAberturaFmt} - ${dados.horaFechamentoFmt}</div></div><h2 style="margin:20px 0">Itens:</h2>${dados.itens.map(i => `<div class="item"><span>${i.quantidade}x ${i.name}</span><span>R$ ${(i.price * i.quantidade).toFixed(2)}</span></div>`).join('')}<div class="total"><span>TOTAL:</span><span class="total-val">R$ ${dados.total.toFixed(2)}</span></div><p style="text-align:center;margin-top:30px">Obrigado pela prefer√™ncia!</p><button class="no-print" onclick="window.print()" style="margin:20px auto;display:block;padding:15px 30px;background:#00ff41;border:none;border-radius:5px;cursor:pointer;font-weight:bold">üñ®Ô∏è Imprimir</button><script>window.onload=()=>setTimeout(()=>window.print(),500);<\/script></body></html>`);
        w.document.close();
    };

    const login = () => {
        if (senha === 'chapa2025') {
            setAutenticado(true);
            setSenha('');
        } else {
            mostrarToast('‚ùå Senha incorreta!', 'warning');
        }
    };

    const addNovoItem = () => {
        if (!newItem.name || !newItem.description) {
            mostrarToast('‚ö†Ô∏è Preencha nome e descri√ß√£o!', 'warning');
            return;
        }
        const id = menu.length > 0 ? Math.max(...menu.map(i => i.id)) + 1 : 1;
        setMenu(m => [...m, { ...newItem, id, price: parseFloat(newItem.price) || 0 }]);
        setNewItem({ name: '', description: '', price: 0, category: 'Carnes', image: '' });
        mostrarToast('‚úÖ Item adicionado!');
    };

    const salvarEdit = () => {
        setMenu(m => m.map(i => i.id === editItem.id ? editItem : i));
        setEditItem(null);
        mostrarToast('‚úÖ Salvo!');
    };

    const deletarItem = (id) => {
        if (confirm('Deletar item?')) {
            setMenu(m => m.filter(i => i.id !== id));
            mostrarToast('‚úÖ Item deletado!');
        }
    };

    const mostrarToast = (msg, tipo = 'success') => {
        setToast({ msg, tipo });
        setTimeout(() => setToast(null), 3000);
    };

    const handleImageUpload = (e, isEdit = false) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = () => {
                if (isEdit) {
                    setEditItem(i => ({ ...i, image: reader.result }));
                } else {
                    setNewItem(i => ({ ...i, image: reader.result }));
                }
            };
            reader.readAsDataURL(file);
        }
    };

    return (
        <div style={styles.container}>
            <style>{`
                @keyframes pulse{0%,100%{opacity:0.15}50%{opacity:0.25}}
                @keyframes scan{0%{left:-100%}100%{left:100%}}
                @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
                @keyframes glow{0%,100%{filter:brightness(1)}50%{filter:brightness(1.2)}}
                @keyframes fadeIn{from{opacity:0}to{opacity:1}}
                @keyframes slideUp{from{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}
                *{scrollbar-width:thin;scrollbar-color:#ff006e #151b3b}
                ::-webkit-scrollbar{width:8px}
                ::-webkit-scrollbar-track{background:#151b3b}
                ::-webkit-scrollbar-thumb{background:#ff006e;border-radius:4px}
                body{margin:0;padding:0;font-family:'Exo 2',sans-serif;background:#050811;color:#fff;overflow-x:hidden}
            `}</style>
            
            <div style={{position:'fixed',top:0,left:0,width:'100%',height:'100%',zIndex:0,opacity:0.15,background:'radial-gradient(circle at 20% 50%,#00ff41 0%,transparent 50%),radial-gradient(circle at 80% 80%,#ff006e 0%,transparent 50%)',animation:'pulse 15s ease-in-out infinite'}}/>
            
            <div style={{position:'relative',zIndex:1,minHeight:'100vh',paddingBottom:'100px'}}>
                <header style={{background:'linear-gradient(135deg,#151b3b 0%,#0a0e27 100%)',padding:'2rem',textAlign:'center',borderBottom:'2px solid #00ff41',boxShadow:'0 4px 30px rgba(0,255,65,0.3)',position:'relative',overflow:'hidden'}}>
                    <div style={{position:'absolute',top:0,left:'-100%',width:'100%',height:'100%',background:'linear-gradient(90deg,transparent,rgba(0,255,65,0.1),transparent)',animation:'scan 3s linear infinite'}}/>
                    <div style={{position:'relative',zIndex:1}}>
                        <img src="chapa.png" alt="Chapa" style={{width:'150px',height:'auto',filter:'drop-shadow(0 0 20px rgba(0,255,65,0.5))',animation:'float 3s ease-in-out infinite'}}/>
                        <h1 style={{fontFamily:'Orbitron',fontSize:'3rem',fontWeight:900,textTransform:'uppercase',margin:'1rem 0 0.5rem',background:'linear-gradient(45deg,#00ff41,#ff006e)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',animation:'glow 2s ease-in-out infinite'}}>CHAPA</h1>
                        <p style={{fontSize:'1rem',color:'#00f5ff',textTransform:'uppercase',letterSpacing:'4px',fontWeight:600}}>Caxambu ¬∑ MG</p>
                    </div>
                </header>

                {mesa && <div onClick={() => setShowMesas(true)} style={{position:'fixed',top:'1rem',right:'1rem',background:'#151b3b',border:'2px solid #ff006e',borderRadius:'15px',padding:'0.75rem 1.5rem',fontFamily:'Orbitron',fontWeight:700,color:'#ff006e',cursor:'pointer',zIndex:100,boxShadow:'0 0 20px rgba(255,0,110,0.5)'}}>ü™ë MESA {mesa}</div>}

                <div style={{padding:'2rem',maxWidth:'1200px',margin:'0 auto'}}>
                    <div style={{position:'relative',marginBottom:'2rem'}}>
                        <span style={{position:'absolute',left:'1.5rem',top:'50%',transform:'translateY(-50%)',fontSize:'1.2rem',color:'#00ff41'}}>üîç</span>
                        <input value={busca} onChange={e=>setBusca(e.target.value)} placeholder="Buscar pratos..." style={{width:'100%',padding:'1rem 1rem 1rem 3.5rem',background:'#151b3b',border:'2px solid #00ff41',borderRadius:'50px',color:'#fff',fontFamily:'Exo 2',fontSize:'1rem',outline:'none'}}/>
                    </div>
                    <div style={{display:'flex',gap:'1rem',overflowX:'auto',paddingBottom:'1rem',marginBottom:'2rem'}}>
                        {cats.map(c => <button key={c} onClick={()=>setCategoria(c)} style={{flexShrink:0,padding:'0.75rem 1.5rem',background:categoria===c?'linear-gradient(135deg,#00ff41,#00f5ff)':'#151b3b',border:`2px solid ${categoria===c?'#00ff41':'#a0a0b0'}`,borderRadius:'25px',color:categoria===c?'#0a0e27':'#a0a0b0',fontFamily:'Exo 2',fontWeight:categoria===c?800:600,fontSize:'0.9rem',cursor:'pointer',textTransform:'uppercase',letterSpacing:'1px',boxShadow:categoria===c?'0 0 20px rgba(0,255,65,0.5)':'none'}}>{c}</button>)}
                    </div>
                </div>

                <div style={{padding:'0 2rem 2rem',maxWidth:'1400px',margin:'0 auto'}}>
                    <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fill,minmax(320px,1fr))',gap:'2rem'}}>
                        {menuFiltrado.map(i => (
                            <div key={i.id} style={{background:'#151b3b',border:'2px solid transparent',borderRadius:'20px',overflow:'hidden',transition:'all 0.4s',cursor:'pointer'}} onMouseEnter={e=>{e.currentTarget.style.transform='translateY(-10px)';e.currentTarget.style.boxShadow='0 20px 40px rgba(0,255,65,0.3)';e.currentTarget.style.border='2px solid #00ff41'}} onMouseLeave={e=>{e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='none';e.currentTarget.style.border='2px solid transparent'}}>
                                <img src={i.image} alt={i.name} style={{width:'100%',height:'220px',objectFit:'cover',borderBottom:'2px solid #00ff41'}}/>
                                <div style={{padding:'1.5rem'}}>
                                    <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'0.75rem'}}>
                                        <h3 style={{fontFamily:'Orbitron',fontSize:'1.3rem',fontWeight:700,color:'#fff',flex:1}}>{i.name}</h3>
                                        <span style={{fontFamily:'Orbitron',fontSize:'1.4rem',fontWeight:900,color:'#ff006e',marginLeft:'1rem'}}>R$ {i.price.toFixed(2)}</span>
                                    </div>
                                    <p style={{color:'#a0a0b0',fontSize:'0.9rem',lineHeight:'1.6',marginBottom:'1rem'}}>{i.description}</p>
                                    <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',gap:'1rem'}}>
                                        <span style={{padding:'0.4rem 0.8rem',background:'rgba(0,255,65,0.1)',border:'1px solid #00ff41',borderRadius:'15px',color:'#00ff41',fontSize:'0.75rem',fontWeight:600,textTransform:'uppercase'}}>{i.category}</span>
                                        <button onClick={()=>addPedido(i)} disabled={!mesa} style={{padding:'0.7rem 1.5rem',background:added.includes(i.id)?'#00ff41':'linear-gradient(135deg,#ff006e,#ff3385)',border:'none',borderRadius:'25px',color:added.includes(i.id)?'#0a0e27':'#fff',fontFamily:'Exo 2',fontWeight:700,fontSize:'0.9rem',cursor:mesa?'pointer':'not-allowed',textTransform:'uppercase',letterSpacing:'1px',opacity:mesa?1:0.5}}>{added.includes(i.id)?'‚úì ADDED':'+ ADD'}</button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {showMesas && (
                    <div style={{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(5,8,17,0.95)',backdropFilter:'blur(10px)',zIndex:200,display:'flex',alignItems:'center',justifyContent:'center',padding:'2rem',animation:'fadeIn 0.3s ease'}} onClick={()=>setShowMesas(false)}>
                        <div style={{background:'#151b3b',border:'2px solid #00ff41',borderRadius:'20px',maxWidth:'1200px',width:'100%',maxHeight:'90vh',overflow:'hidden',boxShadow:'0 0 50px rgba(0,255,65,0.5)',animation:'slideUp 0.4s',display:'flex',flexDirection:'column'}} onClick={e=>e.stopPropagation()}>
                            <div style={{padding:'2rem',borderBottom:'2px solid #00ff41',display:'flex',justifyContent:'space-between',alignItems:'center',background:'linear-gradient(135deg,#0a0e27,#151b3b)'}}>
                                <h2 style={{fontFamily:'Orbitron',fontSize:'2rem',fontWeight:900,color:'#00ff41',textTransform:'uppercase'}}>SELECIONE A MESA</h2>
                                <button onClick={()=>setShowMesas(false)} style={{width:'40px',height:'40px',border:'2px solid #ff006e',borderRadius:'50%',background:'transparent',color:'#ff006e',fontSize:'1.5rem',cursor:'pointer'}}>√ó</button>
                            </div>
                            <div style={{padding:'2rem',overflow:'auto',flex:1}}>
                                <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fill,minmax(100px,1fr))',gap:'1rem'}}>
                                    {Array.from({length:50},(_,i)=>i+1).map(n=>{
                                        const ocupada = pedidos[n]?.length>0;
                                        return <button key={n} onClick={()=>selecionarMesa(n)} disabled={ocupada} style={{aspectRatio:'1',background:ocupada?'rgba(255,0,110,0.1)':'#151b3b',border:`2px solid ${ocupada?'#ff006e':'#00ff41'}`,borderRadius:'15px',color:ocupada?'#ff006e':'#00ff41',fontFamily:'Orbitron',fontWeight:700,fontSize:'1.5rem',cursor:ocupada?'not-allowed':'pointer',opacity:ocupada?0.6:1,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'}}><span style={{fontSize:'0.7rem',fontWeight:600,textTransform:'uppercase'}}>{ocupada?'üîí':'MESA'}</span><span>{n}</span></button>
                                    })}
                                </div>
                            </div>
                        </div>
                    </div>
                )}

                {showCaixa && (
                    <div style={{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(5,8,17,0.95)',backdropFilter:'blur(10px)',zIndex:200,display:'flex',alignItems:'center',justifyContent:'center',padding:'2rem',animation:'fadeIn 0.3s ease'}} onClick={()=>setShowCaixa(false)}>
                        <div style={{background:'#151b3b',border:'2px solid #00ff41',borderRadius:'20px',maxWidth:'1200px',width:'100%',maxHeight:'90vh',overflow:'hidden',boxShadow:'0 0 50px rgba(0,255,65,0.5)',animation:'slideUp 0.4s',display:'flex',flexDirection:'column'}} onClick={e=>e.stopPropagation()}>
                            <div style={{padding:'2rem',borderBottom:'2px solid #00ff41',display:'flex',justifyContent:'space-between',alignItems:'center',background:'linear-gradient(135deg,#0a0e27,#151b3b)'}}>
                                <h2 style={{fontFamily:'Orbitron',fontSize:'2rem',fontWeight:900,color:'#00ff41',textTransform:'uppercase'}}>üí∞ CAIXA</h2>
                                <button onClick={()=>setShowCaixa(false)} style={{width:'40px',height:'40px',border:'2px solid #ff006e',borderRadius:'50%',background:'transparent',color:'#ff006e',fontSize:'1.5rem',cursor:'pointer'}}>√ó</button>
                            </div>
                            <div style={{padding:'2rem',overflow:'auto',flex:1}}>
                                {Object.keys(pedidos).length>0 ? (
                                    <>
                                        <div style={{display:'grid',gap:'1.5rem',marginBottom:'2rem'}}>
                                            {Object.keys(pedidos).sort((a,b)=>parseInt(a)-parseInt(b)).map(m=>(
                                                <div key={m} style={{background:'#0a0e27',border:'2px solid #00ff41',borderRadius:'15px',padding:'1.5rem'}}>
                                                    <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem',paddingBottom:'1rem',borderBottom:'2px solid #00ff41'}}>
                                                        <h3 style={{fontFamily:'Orbitron',fontSize:'1.5rem',color:'#00ff41'}}>Mesa {m}</h3>
                                                        <span style={{fontFamily:'Orbitron',fontSize:'1.5rem',fontWeight:900,color:'#ff006e'}}>R$ {calcTotal(m).toFixed(2)}</span>
                                                    </div>
                                                    {pedidos[m].map(i=><div key={i.id} style={{display:'flex',justifyContent:'space-between',padding:'0.5rem 0',borderBottom:'1px dashed #444'}}><span>{i.name}</span><span style={{color:'#a0a0b0'}}>x{i.quantidade}</span><span style={{color:'#00ff41',fontWeight:700}}>R$ {(i.price*i.quantidade).toFixed(2)}</span></div>)}
                                                    <div style={{display:'flex',gap:'1rem',marginTop:'1rem'}}>
                                                        <button onClick={()=>imprimirRecibo({mesa:m,itens:pedidos[m],total:calcTotal(m),codigo:new Date().getTime(),dataFmt:new Date().toLocaleDateString('pt-BR'),horaAberturaFmt:new Date().toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'}),horaFechamentoFmt:new Date().toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'})})} style={{flex:1,padding:'0.75rem',background:'linear-gradient(135deg,#00f5ff,#0080ff)',border:'none',borderRadius:'25px',color:'#fff',fontFamily:'Exo 2',fontWeight:700,cursor:'pointer'}}>üñ®Ô∏è IMPRIMIR</button>
                                                        <button onClick={()=>fecharConta(m)} style={{flex:1,padding:'0.75rem',background:'linear-gradient(135deg,#ff006e,#ff3385)',border:'none',borderRadius:'25px',color:'#fff',fontFamily:'Exo 2',fontWeight:700,cursor:'pointer'}}>üí≥ FECHAR</button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                        <div style={{background:'linear-gradient(135deg,#00ff41,#00f5ff)',padding:'1.5rem',borderRadius:'15px',display:'flex',justifyContent:'space-between',alignItems:'center'}}>
                                            <span style={{fontFamily:'Orbitron',fontSize:'1.5rem',fontWeight:700,color:'#0a0e27'}}>TOTAL GERAL:</span>
                                            <span style={{fontFamily:'Orbitron',fontSize:'2rem',fontWeight:900,color:'#0a0e27'}}>R$ {Object.keys(pedidos).reduce((s,m)=>s+calcTotal(m),0).toFixed(2)}</span>
                                        </div>
                                    </>
                                ) : <div style={{textAlign:'center',padding:'3rem',color:'#a0a0b0'}}><div style={{fontSize:'4rem',marginBottom:'1rem'}}>üí∞</div><p style={{fontFamily:'Orbitron',fontSize:'1.5rem'}}>Nenhum pedido ativo</p></div>}
                            </div>
                        </div>
                    </div>
                )}

                {showHist && (
                    <div style={{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(5,8,17,0.95)',backdropFilter:'blur(10px)',zIndex:200,display:'flex',alignItems:'center',justifyContent:'center',padding:'2rem',animation:'fadeIn 0.3s ease'}} onClick={()=>setShowHist(false)}>
                        <div style={{background:'#151b3b',border:'2px solid #ff006e',borderRadius:'20px',maxWidth:'1200px',width:'100%',maxHeight:'90vh',overflow:'hidden',boxShadow:'0 0 50px rgba(255,0,110,0.5)',animation:'slideUp 0.4s',display:'flex',flexDirection:'column'}} onClick={e=>e.stopPropagation()}>
                            <div style={{padding:'2rem',borderBottom:'2px solid #ff006e',display:'flex',justifyContent:'space-between',alignItems:'center',background:'linear-gradient(135deg,#0a0e27,#151b3b)'}}>
                                <h2 style={{fontFamily:'Orbitron',fontSize:'2rem',fontWeight:900,color:'#ff006e',textTransform:'uppercase'}}>üìã HIST√ìRICO</h2>
                                <button onClick={()=>setShowHist(false)} style={{width:'40px',height:'40px',border:'2px solid #ff006e',borderRadius:'50%',background:'transparent',color:'#ff006e',fontSize:'1.5rem',cursor:'pointer'}}>√ó</button>
                            </div>
                            <div style={{padding:'2rem',overflow:'auto',flex:1}}>
                                {historico.length>0 ? (
                                    <>
                                        <div style={{display:'grid',gridTemplateColumns:'repeat(3,1fr)',gap:'1rem',marginBottom:'2rem'}}>
                                            <div style={{background:'#0a0e27',padding:'1.5rem',borderRadius:'15px',border:'2px solid #00ff41',textAlign:'center'}}>
                                                <div style={{fontFamily:'Orbitron',fontSize:'2.5rem',fontWeight:700,color:'#00ff41'}}>{historico.length}</div>
                                                <div style={{fontSize:'0.9rem',color:'#a0a0b0',textTransform:'uppercase',letterSpacing:'1px'}}>Pedidos</div>
                                            </div>
                                            <div style={{background:'#0a0e27',padding:'1.5rem',borderRadius:'15px',border:'2px solid #ff006e',textAlign:'center'}}>
                                                <div style={{fontFamily:'Orbitron',fontSize:'2.5rem',fontWeight:700,color:'#ff006e'}}>R$ {historico.reduce((s,p)=>s+p.total,0).toFixed(2)}</div>
                                                <div style={{fontSize:'0.9rem',color:'#a0a0b0',textTransform:'uppercase',letterSpacing:'1px'}}>Faturado</div>
                                            </div>
                                            <div style={{background:'#0a0e27',padding:'1.5rem',borderRadius:'15px',border:'2px solid #00f5ff',textAlign:'center'}}>
                                                <div style={{fontFamily:'Orbitron',fontSize:'2.5rem',fontWeight:700,color:'#00f5ff'}}>{historico.reduce((s,p)=>s+p.itens.reduce((si,i)=>si+i.quantidade,0),0)}</div>
                                                <div style={{fontSize:'0.9rem',color:'#a0a0b0',textTransform:'uppercase',letterSpacing:'1px'}}>Itens</div>
                                            </div>
                                        </div>
                                        <div style={{display:'grid',gap:'1.5rem'}}>
                                            {historico.map((h,i)=>(
                                                <div key={i} style={{background:'#0a0e27',border:'2px solid #ff006e',borderRadius:'15px',padding:'1.5rem'}}>
                                                    <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem',paddingBottom:'1rem',borderBottom:'2px solid #ff006e'}}>
                                                        <div>
                                                            <div style={{fontFamily:'Courier New',fontSize:'0.85rem',color:'#ff006e',fontWeight:700,background:'rgba(255,0,110,0.1)',padding:'0.25rem 0.75rem',borderRadius:'5px',marginBottom:'0.5rem'}}>#{h.codigo}</div>
                                                            <div style={{fontFamily:'Orbitron',fontSize:'1.3rem',fontWeight:700}}>Mesa {h.mesa}</div>
                                                            <div style={{fontSize:'0.85rem',color:'#a0a0b0',marginTop:'0.5rem'}}>üìÖ {h.dataFmt} | üïê {h.horaAberturaFmt} - {h.horaFechamentoFmt}</div>
                                                        </div>
                                                        <div style={{fontFamily:'Orbitron',fontSize:'1.5rem',fontWeight:900,color:'#ff006e'}}>R$ {h.total.toFixed(2)}</div>
                                                    </div>
                                                    {h.itens.map((i,idx)=><div key={idx} style={{display:'flex',justifyContent:'space-between',padding:'0.5rem 0',borderBottom:'1px dashed #444'}}><span>{i.name}</span><span style={{color:'#a0a0b0'}}>x{i.quantidade}</span><span style={{color:'#ff006e',fontWeight:700}}>R$ {(i.price*i.quantidade).toFixed(2)}</span></div>)}
                                                    <button onClick={()=>imprimirRecibo(h)} style={{width:'100%',marginTop:'1rem',padding:'0.75rem',background:'linear-gradient(135deg,#00f5ff,#0080ff)',border:'none',borderRadius:'25px',color:'#fff',fontFamily:'Exo 2',fontWeight:700,cursor:'pointer'}}>üñ®Ô∏è REIMPRIMIR</button>
                                                </div>
                                            ))}
                                        </div>
                                    </>
                                ) : <div style={{textAlign:'center',padding:'3rem',color:'#a0a0b0'}}><div style={{fontSize:'4rem',marginBottom:'1rem'}}>üìã</div><p style={{fontFamily:'Orbitron',fontSize:'1.5rem'}}>Nenhum pedido arquivado</p></div>}
                            </div>
                        </div>
                    </div>
                )}

                {showAdmin && (
                    <div style={{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(5,8,17,0.95)',backdropFilter:'blur(10px)',zIndex:200,display:'flex',alignItems:'center',justifyContent:'center',padding:'2rem',animation:'fadeIn 0.3s ease'}} onClick={()=>!autenticado&&setShowAdmin(false)}>
                        <div style={{background:'#151b3b',border:'2px solid #00f5ff',borderRadius:'20px',maxWidth:autenticado?'1400px':'600px',width:'100%',maxHeight:'90vh',overflow:'hidden',boxShadow:'0 0 50px rgba(0,245,255,0.5)',animation:'slideUp 0.4s',display:'flex',flexDirection:'column'}} onClick={e=>e.stopPropagation()}>
                            <div style={{padding:'2rem',borderBottom:'2px solid #00f5ff',display:'flex',justifyContent:'space-between',alignItems:'center',background:'linear-gradient(135deg,#0a0e27,#151b3b)'}}>
                                <h2 style={{fontFamily:'Orbitron',fontSize:'2rem',fontWeight:900,color:'#00f5ff',textTransform:'uppercase'}}>‚öôÔ∏è ADMIN</h2>
                                <div style={{display:'flex',gap:'1rem',alignItems:'center'}}>
                                    {autenticado && <button onClick={()=>{setAutenticado(false);setSenha('')}} style={{padding:'0.5rem 1rem',background:'#ff006e',border:'none',borderRadius:'15px',color:'#fff',cursor:'pointer'}}>SAIR</button>}
                                    <button onClick={()=>{setShowAdmin(false);if(autenticado){setAutenticado(false);setSenha('')}}} style={{width:'40px',height:'40px',border:'2px solid #ff006e',borderRadius:'50%',background:'transparent',color:'#ff006e',fontSize:'1.5rem',cursor:'pointer'}}>√ó</button>
                                </div>
                            </div>
                            <div style={{padding:'2rem',overflow:'auto',flex:1}}>
                                {!autenticado ? (
                                    <div style={{maxWidth:'400px',margin:'0 auto'}}>
                                        <h3 style={{fontFamily:'Orbitron',fontSize:'1.5rem',marginBottom:'1.5rem',color:'#00f5ff',textAlign:'center'}}>LOGIN</h3>
                                        <input type="password" value={senha} onChange={e=>setSenha(e.target.value)} onKeyPress={e=>e.key==='Enter'&&login()} placeholder="Senha" style={{width:'100%',padding:'1rem',marginBottom:'1rem',background:'#0a0e27',border:'2px solid #00f5ff',borderRadius:'15px',color:'#fff',fontFamily:'Exo 2',fontSize:'1rem',outline:'none'}}/>
                                        <button onClick={login} style={{width:'100%',padding:'1rem',background:'linear-gradient(135deg,#00f5ff,#0080ff)',border:'none',borderRadius:'25px',color:'#fff',fontFamily:'Orbitron',fontWeight:700,fontSize:'1rem',cursor:'pointer'}}>ENTRAR</button>
                                    </div>
                                ) : (
                                    <div>
                                        <div style={{background:'#0a0e27',padding:'2rem',borderRadius:'15px',border:'2px solid #00ff41',marginBottom:'2rem'}}>
                                            <h3 style={{fontFamily:'Orbitron',fontSize:'1.3rem',marginBottom:'1.5rem',color:'#00ff41'}}>ADICIONAR NOVO ITEM</h3>
                                            <div style={{display:'grid',gap:'1rem'}}>
                                                <input value={newItem.name} onChange={e=>setNewItem({...newItem,name:e.target.value})} placeholder="Nome" style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #00ff41',borderRadius:'10px',color:'#fff',outline:'none'}}/>
                                                <textarea value={newItem.description} onChange={e=>setNewItem({...newItem,description:e.target.value})} placeholder="Descri√ß√£o" style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #00ff41',borderRadius:'10px',color:'#fff',outline:'none',minHeight:'80px',fontFamily:'Exo 2'}}/>
                                                <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'1rem'}}>
                                                    <input type="number" value={newItem.price} onChange={e=>setNewItem({...newItem,price:e.target.value})} placeholder="Pre√ßo" style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #00ff41',borderRadius:'10px',color:'#fff',outline:'none'}}/>
                                                    <select value={newItem.category} onChange={e=>setNewItem({...newItem,category:e.target.value})} style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #00ff41',borderRadius:'10px',color:'#fff',outline:'none'}}>
                                                        {cats.filter(c=>c!=='Todos').map(c=><option key={c} value={c}>{c}</option>)}
                                                    </select>
                                                </div>
                                                <input type="file" accept="image/*" onChange={e=>handleImageUpload(e,false)} style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #00ff41',borderRadius:'10px',color:'#fff'}}/>
                                                {newItem.image&&<img src={newItem.image} alt="Preview" style={{width:'200px',height:'150px',objectFit:'cover',borderRadius:'10px'}}/>}
                                                <button onClick={addNovoItem} style={{padding:'1rem',background:'linear-gradient(135deg,#00ff41,#00f5ff)',border:'none',borderRadius:'25px',color:'#0a0e27',fontFamily:'Orbitron',fontWeight:700,cursor:'pointer'}}>‚ûï ADICIONAR</button>
                                            </div>
                                        </div>
                                        <div style={{display:'grid',gap:'1.5rem'}}>
                                            {menu.map(i=>(
                                                <div key={i.id} style={{background:'#0a0e27',border:'2px solid #ff006e',borderRadius:'15px',padding:'1.5rem'}}>
                                                    {editItem?.id===i.id ? (
                                                        <div style={{display:'grid',gap:'1rem'}}>
                                                            <input value={editItem.name} onChange={e=>setEditItem({...editItem,name:e.target.value})} style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #ff006e',borderRadius:'10px',color:'#fff',outline:'none'}}/>
                                                            <textarea value={editItem.description} onChange={e=>setEditItem({...editItem,description:e.target.value})} style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #ff006e',borderRadius:'10px',color:'#fff',outline:'none',minHeight:'60px',fontFamily:'Exo 2'}}/>
                                                            <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'1rem'}}>
                                                                <input type="number" value={editItem.price} onChange={e=>setEditItem({...editItem,price:e.target.value})} style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #ff006e',borderRadius:'10px',color:'#fff',outline:'none'}}/>
                                                                <select value={editItem.category} onChange={e=>setEditItem({...editItem,category:e.target.value})} style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #ff006e',borderRadius:'10px',color:'#fff',outline:'none'}}>
                                                                    {cats.filter(c=>c!=='Todos').map(c=><option key={c} value={c}>{c}</option>)}
                                                                </select>
                                                            </div>
                                                            <input type="file" accept="image/*" onChange={e=>handleImageUpload(e,true)} style={{padding:'0.75rem',background:'#151b3b',border:'2px solid #ff006e',borderRadius:'10px',color:'#fff'}}/>
                                                            {editItem.image&&<img src={editItem.image} alt="Preview" style={{width:'200px',height:'150px',objectFit:'cover',borderRadius:'10px'}}/>}
                                                            <div style={{display:'flex',gap:'1rem'}}>
                                                                <button onClick={salvarEdit} style={{flex:1,padding:'0.75rem',background:'linear-gradient(135deg,#00ff41,#00f5ff)',border:'none',borderRadius:'25px',color:'#0a0e27',fontWeight:700,cursor:'pointer'}}>üíæ SALVAR</button>
                                                                <button onClick={()=>setEditItem(null)} style={{flex:1,padding:'0.75rem',background:'#444',border:'none',borderRadius:'25px',color:'#fff',fontWeight:700,cursor:'pointer'}}>CANCELAR</button>
                                                            </div>
                                                        </div>
                                                    ) : (
                                                        <div>
                                                            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem'}}>
                                                                <h4 style={{fontFamily:'Orbitron',fontSize:'1.2rem',color:'#fff'}}>{i.name}</h4>
                                                                <span style={{fontFamily:'Orbitron',fontSize:'1.3rem',fontWeight:900,color:'#ff006e'}}>R$ {i.price.toFixed(2)}</span>
                                                            </div>
                                                            <p style={{color:'#a0a0b0',marginBottom:'1rem'}}>{i.description}</p>
                                                            <div style={{display:'flex',gap:'1rem'}}>
                                                                <button onClick={()=>setEditItem(i)} style={{flex:1,padding:'0.75rem',background:'linear-gradient(135deg,#00f5ff,#0080ff)',border:'none',borderRadius:'25px',color:'#fff',fontWeight:700,cursor:'pointer'}}>‚úèÔ∏è EDITAR</button>
                                                                <button onClick={()=>deletarItem(i.id)} style={{flex:1,padding:'0.75rem',background:'linear-gradient(135deg,#ff006e,#ff3385)',border:'none',borderRadius:'25px',color:'#fff',fontWeight:700,cursor:'pointer'}}>üóëÔ∏è DELETAR</button>
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                )}

                <div style={{position:'fixed',bottom:'2rem',left:'50%',transform:'translateX(-50%)',display:'flex',gap:'1rem',zIndex:100,flexWrap:'wrap',justifyContent:'center',maxWidth:'calc(100% - 2rem)'}}>
                    <button onClick={()=>setShowCaixa(true)} style={{padding:'1rem 2rem',border:'2px solid #00ff41',borderRadius:'50px',fontFamily:'Orbitron',fontWeight:700,fontSize:'1rem',cursor:'pointer',textTransform:'uppercase',letterSpacing:'2px',display:'flex',alignItems:'center',gap:'0.5rem',background:'#151b3b',color:'#00ff41'}}>üí∞ CAIXA</button>
                    <button onClick={()=>setShowHist(true)} style={{padding:'1rem 2rem',border:'2px solid #ff006e',borderRadius:'50px',fontFamily:'Orbitron',fontWeight:700,fontSize:'1rem',cursor:'pointer',textTransform:'uppercase',letterSpacing:'2px',display:'flex',alignItems:'center',gap:'0.5rem',background:'#151b3b',color:'#ff006e'}}>üìã HIST√ìRICO</button>
                    <button onClick={()=>setShowAdmin(true)} style={{padding:'1rem 2rem',border:'2px solid #00f5ff',borderRadius:'50px',fontFamily:'Orbitron',fontWeight:700,fontSize:'1rem',cursor:'pointer',textTransform:'uppercase',letterSpacing:'2px',display:'flex',alignItems:'center',gap:'0.5rem',background:'#151b3b',color:'#00f5ff'}}>‚öôÔ∏è ADMIN</button>
                </div>

                {toast && <div style={{position:'fixed',bottom:'120px',left:'50%',transform:'translateX(-50%)',background:'#151b3b',border:`2px solid ${toast.tipo==='warning'?'#ff006e':'#00ff41'}`,borderRadius:'50px',padding:'1rem 2rem',color:'#fff',fontWeight:600,zIndex:300,animation:'slideUp 0.4s',boxShadow:`0 0 20px ${toast.tipo==='warning'?'rgba(255,0,110,0.5)':'rgba(0,255,65,0.5)'}`,display:'flex',alignItems:'center',gap:'0.75rem'}}><span>{toast.msg}</span></div>}
            </div>
        </div>
    );
};

const styles = {
    container: {
        margin: 0,
        padding: 0,
        fontFamily: "'Exo 2', sans-serif",
        background: '#050811',
        color: '#fff',
        minHeight: '100vh'
    }
};

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
